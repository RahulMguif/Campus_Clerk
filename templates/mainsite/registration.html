{% extends 'mainsite/index.html' %}
{% load static %}
{% block mainsite_content %}

<link rel="stylesheet" href="{% static 'registration/fonts/material-design-iconic-font/css/material-design-iconic-font.min.css' %}">
		
		<!-- STYLE CSS -->
<link rel="stylesheet" href="{% static 'registration/css/style.css' %}">

<!-- Display Messages -->
<style>
	.form-wrapper {
		position: relative;
		width: 300px;
	}
	.form-control {
		width: 100%;
		padding: 10px;
		padding-right: 40px;
		border: 1px solid #ccc;
		border-radius: 5px;
		font-size: 16px;
	}
	.eye-icon {
		position: absolute;
		right: 10px;
		top: 48%;
		transform: translateY(-50%);
		cursor: pointer;
		font-size: 15px;
		color: #888;
	}
</style>
 

		<div class="wrapper" style="background-image: url('{% static 'registration/images/bg-registration-form-2.jpg' %}');">
			
			<div class="inner" style="width: 800px; height: 800px; background-size: cover; background-position: center; background-image: url('{% static 'registration/images/registration-form-2.jpg' %}');">
				<form action="" method="POST">
					{% csrf_token %}
					<h3>Registration Form</h3>
					<div class="form-group">
						<div class="form-wrapper">
							<label for="">Full Name *</label>
							<input type="text" class="form-control" name="fullname" required id="fullname">
						</div>
						<div class="form-wrapper">
							<label for="">Email *</label>
							<input type="email" class="form-control" name="email" required id="email" >
						</div>
					</div>
				
					<div class="form-group">
						<div class="form-wrapper">
							<label for="">Course *</label>
							<input type="text" class="form-control" name="course" required id="course">
						</div>
						<div class="form-wrapper">
							<label for="">Department *</label>
							<input type="text" class="form-control" name="department" required id="department">
						</div>
					</div>
				
					<div class="form-group">
						<div class="form-wrapper">
							<label for="semester">Semester *</label>
							<select class="form-control" name="semester" id="semester" required>
								<option value="">-- select --</option>
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5</option>
								<option value="6">6</option>
								<option value="7">7</option>
								<option value="8">8</option>
							</select>
						</div>
						
						<div class="form-wrapper">
							<label for="">Year of Admission *</label>
							<input type="date" class="form-control" name="year_of_joining" id="year_of_joining" required>
						</div>
					</div>
				
					<div class="form-wrapper">
						<label for="mobile">Mobile *</label>
						<input type="text" class="form-control" name="mobile" id="mobile" required 
							   inputmode="numeric" maxlength="14">
					</div>
					
					
				
					<div class="form-wrapper">
						<label for="password">Password</label>
						<input type="password" class="form-control" id="password" name="password" required>
						<i class="fas fa-eye eye-icon" id="togglePassword"></i>
						<div id="passwordCriteria" class="error-message">
							<p id="lengthCriteria">✅ Must be 6-12 characters</p>
							<p id="uppercaseCriteria">❌ At least one uppercase letter</p>
							<p id="lowercaseCriteria">❌ At least one lowercase letter</p>
							<p id="numberCriteria">❌ At least one number</p>
							<p id="specialCriteria">❌ At least one special character (@, #, $, etc.)</p>
						</div>
					</div>
					
					<div class="form-wrapper">
						<label for="confirm_password">Confirm Password</label>
						<input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
						<i class="fas fa-eye eye-icon" id="toggleConfirmPassword"></i>
						<div id="confirmError" class="error-message">Passwords do not match.</div>
					</div>
					
					<script>
						const passwordInput = document.getElementById("password");
						const confirmPasswordInput = document.getElementById("confirm_password");
						const togglePassword = document.getElementById("togglePassword");
						const toggleConfirmPassword = document.getElementById("toggleConfirmPassword");
						const passwordCriteria = document.getElementById("passwordCriteria");
						const confirmError = document.getElementById("confirmError");
					
						// Password criteria elements
						const lengthCriteria = document.getElementById("lengthCriteria");
						const uppercaseCriteria = document.getElementById("uppercaseCriteria");
						const lowercaseCriteria = document.getElementById("lowercaseCriteria");
						const numberCriteria = document.getElementById("numberCriteria");
						const specialCriteria = document.getElementById("specialCriteria");
					
						// Regular expressions
						const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@#$%^&*!])[A-Za-z\d@#$%^&*!]{6,12}$/;
					
						// Show/hide password
						function toggleVisibility(input, toggleIcon) {
							toggleIcon.addEventListener("click", function () {
								if (input.type === "password") {
									input.type = "text";
									toggleIcon.classList.add("fa-eye-slash");
								} else {
									input.type = "password";
									toggleIcon.classList.remove("fa-eye-slash");
								}
							});
						}
					
						toggleVisibility(passwordInput, togglePassword);
						toggleVisibility(confirmPasswordInput, toggleConfirmPassword);
					
						// Password validation check
						passwordInput.addEventListener("input", function () {
							let value = passwordInput.value;
					
							// Length validation
							if (value.length >= 6 && value.length <= 12) {
								lengthCriteria.classList.add("valid");
								lengthCriteria.textContent = "✅ Must be 6-12 characters";
							} else {
								lengthCriteria.classList.remove("valid");
								lengthCriteria.textContent = "❌ Must be 6-12 characters";
							}
					
							// Uppercase letter validation
							if (/[A-Z]/.test(value)) {
								uppercaseCriteria.classList.add("valid");
								uppercaseCriteria.textContent = "✅ At least one uppercase letter";
							} else {
								uppercaseCriteria.classList.remove("valid");
								uppercaseCriteria.textContent = "❌ At least one uppercase letter";
							}
					
							// Lowercase letter validation
							if (/[a-z]/.test(value)) {
								lowercaseCriteria.classList.add("valid");
								lowercaseCriteria.textContent = "✅ At least one lowercase letter";
							} else {
								lowercaseCriteria.classList.remove("valid");
								lowercaseCriteria.textContent = "❌ At least one lowercase letter";
							}
					
							// Number validation
							if (/\d/.test(value)) {
								numberCriteria.classList.add("valid");
								numberCriteria.textContent = "✅ At least one number";
							} else {
								numberCriteria.classList.remove("valid");
								numberCriteria.textContent = "❌ At least one number";
							}
					
							// Special character validation
							if (/[@#$%^&*!]/.test(value)) {
								specialCriteria.classList.add("valid");
								specialCriteria.textContent = "✅ At least one special character (@, #, $, etc.)";
							} else {
								specialCriteria.classList.remove("valid");
								specialCriteria.textContent = "❌ At least one special character (@, #, $, etc.)";
							}
					
							// Show password criteria only when user types
							passwordCriteria.style.display = value.length > 0 ? "block" : "none";
						});
					
						// Confirm password check
						confirmPasswordInput.addEventListener("input", function () {
							if (confirmPasswordInput.value === passwordInput.value) {
								confirmError.style.display = "none";
							} else {
								confirmError.style.display = "block";
							}
						});
					
					</script>
				
					<button type="submit">Register Now</button>
				</form>
				
				
				
			</div>
		</div>

		<script>
			document.getElementById("fullname","").addEventListener("input", function (e) {
				this.value = this.value.replace(/[^A-Za-z.' ]/g, '');
			});
			document.getElementById("department").addEventListener("input", function () {
				this.value = this.value.replace(/[^A-Za-z.' ]/g, '');
			});
			document.getElementById("course").addEventListener("input", function () {
				this.value = this.value.replace(/[^A-Za-z.' ]/g, '');
			});

			 // Get today's date in YYYY-MM-DD format
			 let today = new Date().toISOString().split("T")[0];

			 // Set max attribute to today's date
			 document.getElementById("year_of_joining").setAttribute("max", today);
			</script>
			<script>
				document.getElementById("email").addEventListener("input", function () {
					let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
					if (!emailPattern.test(this.value)) {
						this.setCustomValidity("Please enter a valid email ");
					} else {
						this.setCustomValidity("");
					}
				});
				</script>
				<script>
					document.getElementById("mobile").addEventListener("input", function (e) {
						let value = this.value;
					
						// Ensure "+91 " prefix is always present
						if (!value.startsWith("+91 ")) {
							this.value = "+91 ";
						}
					
						// Allow only numbers after "+91 "
						this.value = this.value.replace(/[^0-9+ ]/g, ''); 
					
						// Limit total length to "+91 " (4 chars) + 10 digits = 14 characters
						if (this.value.length > 14) {
							this.value = this.value.slice(0, 14);
						}
					});
					
					// Set default value when page loads
					document.getElementById("mobile").value = "+91 ";
					</script>
					
					
		<script>

			const passwordField = document.getElementById("password");
			const togglePassword = document.getElementById("togglePassword");
		
			togglePassword.addEventListener("click", function () {
				if (passwordField.type === "password") {
					passwordField.type = "text";
					togglePassword.classList.remove("fa-eye");
					togglePassword.classList.add("fa-eye-slash");
				} else {
					passwordField.type = "password";
					togglePassword.classList.remove("fa-eye-slash");
					togglePassword.classList.add("fa-eye");
				}
			});
		</script>

	

{% endblock mainsite_content %}